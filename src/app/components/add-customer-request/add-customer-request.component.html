<div class="k-m-3 k-overflow-y-auto" style="height: 80vh;">
    <div class="k-d-flex k-align-items-end k-gap-3">
        <kendo-label text="Customer">
            <b class="required-label"></b>
            <kendo-combobox 
            [data]="customers$ | async" 
                textField="customerName" 
                valueField="customerID" 
                placeholder="Customer" 
                rounded="large"
                [(ngModel)]="selectedCustomer"

                (valueChange)="onCustomerChange($event)">
            </kendo-combobox>
        </kendo-label>
        
     <!-- Device Type ComboBox -->
<kendo-label text="Device Type">
    <b class="required-label"></b>
    <kendo-combobox 
        [data]="deviceTypes"             
        placeholder="Device"           
        rounded="large"               
        [(ngModel)]="selectedDeviceType" 
        (valueChange)="onDeviceTypeChange($event)"> 
    </kendo-combobox>
</kendo-label>
        <kendo-label text="Lot Number">
            <!-- <b class="required-label"></b> -->
            <kendo-textbox 
            placeholder="#Lot Number" 
            rounded="large" 
            [(ngModel)]="lotNumber">
        </kendo-textbox>
        </kendo-label>
        
        <kendo-button 
        themeColor="success" 
        rounded="large" 
        style="width: 7rem" 
        (click)="onSearch()">
        Search
    </kendo-button>
    </div>
      
      <kendo-grid 
    [kendoGridBinding]="(gridData$ | async) || []" 
    class="k-my-3" 
    [height]="300" 
    [selectable]="{ checkboxOnly: true, mode: 'multiple' }" 
    (selectionChange)="onSelectionChange($event)"   (cellClose)="cellCloseHandler($event)"
    (cellClick)="editHandler($event)"> <!-- Added cellClick to trigger edit -->
    
    <kendo-grid-checkbox-column [width]="40"></kendo-grid-checkbox-column>
    
    <kendo-grid-column *ngFor="let column of columns"
                       [field]="column.field"
                       [title]="column.title"
                       [width]="column.width">
        
        <!-- Default Cell Template -->
        <ng-template kendoGridCellTemplate let-dataItem>
            {{ dataItem[column.field] }}
        </ng-template>
        
        <!-- Edit Template for shippedQty-->
        <ng-template *ngIf="column.field === 'shippedQty'" kendoGridEditTemplate let-dataItem="dataItem">
            <input kendoTextBox [(ngModel)]="dataItem.shippedQty" />
        </ng-template>
        
    </kendo-grid-column>
    
</kendo-grid>

      
<div class="k-d-flex k-gap-4 k-mb-4">
    <input type="checkbox" kendoCheckBox [(ngModel)]="formData.oqa">
    <kendo-label text="OQA"></kendo-label>
    <input type="checkbox" kendoCheckBox [(ngModel)]="formData.bake">
    <kendo-label text="Bake"></kendo-label>
    <input type="checkbox" kendoCheckBox [(ngModel)]="formData.pl">
    <kendo-label text="P&L"></kendo-label>
</div>
<kendo-card class="card-full">
    <kendo-card-body>
        <h2 class="k-mt-2">Address:</h2>
        <div class="k-d-flex k-flex-col k-gap-2 k-w-full">
            <div class="k-d-flex k-gap-4">
                <input type="text" placeholder="Contact Name" class="k-w-full" kendoTextBox [(ngModel)]="formData.contactName"  name="contactName" required #contactName="ngModel">

                <input type="text" placeholder="Company Name" class="k-w-full" kendoTextBox [(ngModel)]="formData.companyName"  name="companyName" required #companyName="ngModel">
                <input type="text" placeholder="Phone Number" class="k-w-full" kendoTextBox [(ngModel)]="formData.phoneNumber"  name="phoneNumber" required  pattern="[0-9]{10}" #phoneNumber="ngModel">
            </div>
            <div class="k-d-flex k-gap-4">
                <input type="text" placeholder="Address Line1" class="k-w-full" kendoTextBox [(ngModel)]="formData.addressLine1"  name="addressLine1" required  #addressLine1="ngModel">
                <input type="text" placeholder="Address Line2" class="k-w-full" kendoTextBox [(ngModel)]="formData.addressLine2"  >
                <input type="text" placeholder="Zip" class="k-w-full" kendoTextBox [(ngModel)]="formData.zip"  name="zip" required  #zip="ngModel">
            </div>
            <div class="k-d-flex k-gap-4">
               <!--  <kendo-combobox placeholder="City" class="k-w-full" rounded="large" [(ngModel)]="formData.city"></kendo-combobox>
                <kendo-combobox placeholder="State" class="k-w-full" rounded="large" [(ngModel)]="formData.state"></kendo-combobox>
                <kendo-combobox placeholder="Country" class="k-w-full" rounded="large" [(ngModel)]="formData.country"></kendo-combobox>
 -->
                <input type="text" placeholder="City" class="k-w-full" kendoTextBox [(ngModel)]="formData.city" name="city" required #city="ngModel" >
                <input type="text" placeholder="State" class="k-w-full" kendoTextBox [(ngModel)]="formData.state" name="state" required #state="ngModel" >
                <input type="text" placeholder="Country" class="k-w-full" kendoTextBox [(ngModel)]="formData.country" name="country" required #country="ngModel" >
            </div>
        </div>
    </kendo-card-body>
</kendo-card>
<div class="k-d-flex k-gap-3 k-mt-3">
    <button kendoButton type="button" rounded="large" themeColor="error" class="k-ml-auto"
        style="width:6rem">Cancel</button>
    <button kendoButton type="button" rounded="large" themeColor="success" style="width:6rem" (click)="submitForm()">Submit</button>
</div>
</div>  