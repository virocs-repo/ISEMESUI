<div>
  <kendo-tabstrip>
    <kendo-tabstrip-tab title="Lot Info" [selected]="true">
      <ng-template kendoTabContent>
        <div class="k-m-2 k-overflow-y-auto" style="height: auto">
          <kendo-card-body class="card-flex" style="background-color:#E8F9F1">
            <div class="k-d-flex k-flex-wrap k-gap-3">
              <div class="field-container k-d-flex k-align-items-center">
                <kendo-label [for]="'lotNumber'" class="label-text">
                  <strong>Lot/ Mail/ FGI Pull #:</strong>
                </kendo-label>&nbsp;&nbsp;
                <span class="value-text">{{ lotNumber }}</span>
              </div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
              <div class="field-container k-d-flex k-align-items-center">
                <kendo-label [for]="'customerName'" class="label-text">
                  <strong>Customer:</strong>
                </kendo-label>&nbsp;&nbsp;
                <span class="value-text">{{ customerName }}</span>
              </div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
              <div class="field-container k-d-flex k-align-items-center">
                <kendo-label [for]="'device'" class="label-text">
                  <strong>Device:</strong>
                </kendo-label>&nbsp;&nbsp;
                <span class="value-text">{{ device }}</span>
              </div>
            </div>
          </kendo-card-body>
            <fieldset class="k-mt-1">
              <legend><b>Hold Details</b></legend>
              <div class="k-d-flex k-flex-column k-gap-3">
                <div class="k-d-flex k-align-items-center k-gap-3">
                  <label class="k-label k-mb-0" style="min-width: 150px;">Hold:<b class="required-label"></b></label>
                  <kendo-checkbox 
                    [(ngModel)]="isHold" 
                    label="Hold"
                    [disabled]="isView"
                    (change) ="onHoldChanged()" >
                  </kendo-checkbox>
                </div>

                <div class="k-d-flex k-flex-wrap k-gap-3">
                  <label class="k-label" style="min-width: 150px;">Hold Type:<b class="required-label"></b></label>
                  <div>
                    <kendo-combobox
                      [(ngModel)]="selectedHoldType"
                      [data]="holdTypes"
                      placeholder="Select Hold Type"
                      [disabled]="isReadOnly">
                    </kendo-combobox>
                  </div>
                </div>

                <div class="k-d-flex k-align-items-center k-gap-3">
                  <label class="k-label k-mb-0" style="min-width: 150px;">Hold Code:<b class="required-label"></b></label>
                  <div [class.disabled]="isReadOnly">
                    <kendo-treeview
                      [nodes]="treeNodes"
                      [textField]="['groupName', 'holdCode']"
                      kendoTreeViewExpandable
                      kendoTreeViewHierarchyBinding
                      kendoTreeViewSelectable
                      childrenField="holdGroupDetails"
                      (selectionChange)="onSelectionChange($event)">
                    </kendo-treeview>
                  </div>
                </div>

                <div class="k-d-flex k-align-items-center k-gap-3">
                  <label class="k-label k-mb-0" style="min-width: 150px;">Reason:<b class="required-label"></b></label>
                  <kendo-textarea
                    [(ngModel)]="reason"
                    style="flex: 1;"
                    [disabled]="isReadOnly">
                  </kendo-textarea>
                </div>

                <div class="k-d-flex k-align-items-center k-gap-3">
                  <label class="k-label k-mb-0" style="min-width: 150px;">Hold Comments:<b class="required-label"></b></label>
                  <kendo-textarea
                    [(ngModel)]="holdComments"
                    style="flex: 1;"
                    [disabled]="isReadOnly">
                  </kendo-textarea>
                </div>

                <div *ngIf="showHoldFields" class="k-d-flex k-align-items-center k-gap-3">
                  <label class="k-label k-mb-0" style="min-width: 150px;">Off Hold Comments:<b class="required-label"></b></label>
                  <kendo-textarea
                    [(ngModel)]="offHoldComments"
                    style="flex: 1;"
                    [disabled]="isView">
                  </kendo-textarea>
                </div>

                <div *ngIf="showHoldFields" class="k-d-flex k-align-items-center k-gap-3">
                  <kendo-label class="k-mb-0" style="min-width: 150px;">Hold By:</kendo-label>
                  <span class="value-text">{{ holdBy || '......' }}</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                  <kendo-label class="k-mb-0" style="min-width: 150px;">Hold Time:</kendo-label>
                  <span class="value-text">{{ holdTime || '......' }}</span>
                </div>
            
                <div *ngIf="showHoldFields" class="k-d-flex k-align-items-center k-gap-3">
                  <kendo-label class="k-mb-0" style="min-width: 150px;">Off Hold By:</kendo-label>
                  <span class="value-text">{{ offHoldBy || '......' }}</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                  <kendo-label class="k-mb-0" style="min-width: 150px;">Off Hold Time:</kendo-label>
                  <span class="value-text">{{ offHoldTime || '......' }}</span>
                </div>
              </div>
            </fieldset>
            <div class="k-d-flex k-gap-3 k-mt-3">
              <button kendoButton type="button" rounded="full" themeColor="info" class="k-ml-auto" style="width:6rem" (click)="save()" [hidden]="isView">Save</button>
              <button kendoButton type="button" rounded="full" themeColor="error" style="width:6rem" (click)="resetForm()" [hidden]="true">Cancel</button>
            </div>
        </div>
      </ng-template>
    </kendo-tabstrip-tab>
    <kendo-tabstrip-tab title="Hold Attachments">
      <ng-template kendoTabContent>

        <kendo-card class="card-green card-full">
          <kendo-card-body>
            <div>
              <label style="font-weight: 700; color: maroon;">Hold Alert Info  </label>
            </div>
            <kendo-fileselect #upFiles  (upload)="onUpload($event)"
              [multiple]="false">
            </kendo-fileselect>
            <button kendoButton type="button" rounded="large" themeColor="secondary" style="margin-top: 1%;width:6rem;"
              (click)="uploadFilesById(upFiles)" [disabled]="isDisabled.shipBtn" >Upload</button>
              <div>
                <kendo-grid [data]="shippingAttachments" class="receipt-attachments" style="margin-top: 5%;">
                  <kendo-grid-column title="#" [width]="40">
                    <ng-template kendoGridCellTemplate let-rowIndex="rowIndex">
                      {{ rowIndex + 1 }}
                    </ng-template>
                  </kendo-grid-column>
                  <kendo-grid-column field="attachmentName" title="File Name">
                    <ng-template kendoGridCellTemplate let-dataItem>
                      <a class="minimal-text link" [href]="downloadFileApi+dataItem.path" target="_blank">{{dataItem.path}}</a>
                    </ng-template>
                  </kendo-grid-column>
                  <kendo-grid-column field="createdBY" title="Attachment By">
                    <ng-template kendoGridCellTemplate let-dataItem>
                      <a class="minimal-text" [title]="dataItem.createdBY">{{dataItem.createdBY}}</a>
                    </ng-template>
                  </kendo-grid-column>
                  <kendo-grid-column field="createdON" title="Attached On">
                    <ng-template kendoGridCellTemplate let-dataItem>
                      <a class="minimal-text" [title]="dataItem.createdON">{{dataItem.createdON}}</a>
                    </ng-template>
                  </kendo-grid-column>
                  
                  <kendo-grid-column title="Actions" [width]="100">
                    <ng-template kendoGridCellTemplate let-dataItem>
                      <button kendoButton [svgIcon]="ICON.trashIcon" themeColor="error" (click)="deleteFile(dataItem)" [disabled]="isDisabled.shipBtn"></button>
                    </ng-template>
                  </kendo-grid-column>
                </kendo-grid>
              </div>
          </kendo-card-body>
        </kendo-card>
      </ng-template>
      </kendo-tabstrip-tab>
  </kendo-tabstrip>
</div>
